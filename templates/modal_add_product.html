<div id="modal-add-product" class="bg-white w-5/6">
    <!-- Modal header -->
    <div>
        <h1 class="font-bold">Tambah Produk</h1>
    </div>
    <!-- Modal body -->
    <div>
        {% include 'modal_product_form.html' with formid="add" %}
    </div>
    <!-- Modal footer -->
    <div>
        <button onclick="hideModal()">Keluar</button>
        <button type="submit" form="add-product-form">Tambah Produk</button>
    </div>
</div>
<script>
async function addProduct() {

    await fetch("{% url 'main:add_product_ajax' %}", {
        method: "POST",
        body: new FormData(document.getElementById('add-product-form')),
    });

    document.getElementById("add-product-form").reset();
    hideModal();

    showToast('Berhasil menambahkan produk!', '', null);

    document.dispatchEvent(new CustomEvent('productadded'));

    return false;

}

document.getElementById("add-product-form").addEventListener("submit", function(e) {
    e.preventDefault();
    addProduct();
})
</script>
